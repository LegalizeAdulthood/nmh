#
# Makefile for zotnet/mts subdirectory
#
# $Id$
#

SHELL = /bin/sh

top_srcdir = @top_srcdir@
srcdir     = @srcdir@
VPATH      = @srcdir@

prefix      = @prefix@
exec_prefix = @exec_prefix@
bindir      = @bindir@
libdir      = @libdir@
etcdir      = @sysconfdir@

mailspool    = @mailspool@
sendmailpath = @sendmailpath@

CC         = @CC@
CFLAGS     = @CFLAGS@
DEFS       = @DEFS@
KRB4_INCLUDES = @KRB4_INCLUDES@
HESIOD_INCLUDES = @HESIOD_INCLUDES@
INCLUDES   = -I../.. -I$(srcdir) -I$(top_srcdir) $(KRB4_INCLUDES) $(HESIOD_INCLUDES)
CONFIGDEFS = -DNMHETCDIR='"$(etcdir)"' -DMAILSPOOL='"$(mailspool)"' -DSENDMAILPATH='"$(sendmailpath)"'
LINT	   = @LINT@
LINTFLAGS  = @LINTFLAGS@

COMPILE  = $(CC) -c $(DEFS) $(INCLUDES) $(CFLAGS)
COMPILE2 = $(CC) -c $(DEFS) $(CONFIGDEFS) $(INCLUDES) $(CFLAGS)

SED = sed

.SUFFIXES:
.SUFFIXES: .c .o

.c.o:
	$(COMPILE) $<

# header files
HDRS = mts.h

# source files
SRCS = mts.c client.c

# object files
OBJS = mts.o client.o

# auxiliary files
AUX = Makefile.in

# all files in this directory included in the distribution
DIST = $(HDRS) $(SRCS) $(AUX)

# ========= DEPENDENCIES FOR BUILDING AND INSTALLING ==========

all: $(OBJS)

mts.o: mts.c
	$(COMPILE2) $<

install:

uninstall:

# ========== DEPENDENCIES FOR CLEANUP ==========

mostlyclean:
	rm -f *.o *~

clean: mostlyclean

distclean: clean
	rm -f Makefile

realclean: distclean

superclean: realclean

# ========== DEPENDENCIES FOR LINT ================

lint: 
	$(LINT) $(LINTFLAGS) $(INCLUDES) $(DEFS) $(SRCS)

# ========== DEPENDENCIES FOR MAINTENANCE ==========

subdir = zotnet/mts

Makefile: Makefile.in ../../config.status
	cd ../.. && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= ./config.status
 
distdir = ../../`cat ../../distname`/$(subdir)
nmhdist: $(DIST)
	@echo "Copying distribution files in $(subdir)"
	@for file in $(DIST); do \
	  cp -p $(srcdir)/$$file $(distdir); \
	done

